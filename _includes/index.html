{% assign posts_count = paginator.posts | size %}

{% comment %}
Browse by tag. Requires pagination to be enabled.
{% endcomment %}
{% if page.pagination.enabled %}
  <nav class="browse-by-tag" style="float: none; text-align: left;">
    {% if page.pagination.tag %}
      <a class="nav-link" href="{{ "/" | relative_url }}">All Posts</a>&nbsp;
    {% else %}
      <a class="nav-active" href="{{ "/" | relative_url }}">All Posts</a>&nbsp;
    {% endif %}

    {% assign tags = site.tags | sort %}

    {% for tag in tags %}
      {% if page.pagination.tag == tag[0] %}

        <a class="nav-active" href="{{ '/tags/' | append: tag[0] | relative_url }}">
          {{tag[0] | replace: ' ', '&nbsp;'}}
        </a>&nbsp;

      {% else %}

        <a class="nav-link" href="{{ '/tags/' | append: tag[0] | relative_url }}">
          {{tag[0] | replace: ' ', '&nbsp;'}}
        </a>&nbsp;

      {% endif %}
    {% endfor %}
  </nav>
{% endif %}

<div class="home">
  {% if posts_count > 0 %}
  <div class="posts">
    {% for post in paginator.posts %}
    <div class="post">

      <a href="{{ post.url | relative_url }}" class="post-link">
        <h3 class="post-title" style="text-transform: capitalize;">{{ post.title }}</h3>
      </a>

      <p class="post-meta">
        {% if site.date_format %}
        {{ post.date | date: site.date_format }}
        {% else %}
        {{ post.date | date: "%b %-d, %Y" }}
        {% endif %}
        <span style="font-weight: normal">&nbsp;â€¢&nbsp;</span>
        {{post.tags}}
      </p>

      <span class="post-summary">
        {% if post.description %}
        {{ post.description }}
        {% else %}
        {{ post.excerpt | strip_html | truncatewords: 30 }}
        {% endif %}
      </span>

    </div>
    {% endfor %}
  </div>

  {% include pagination.html %}
  {% else %}
  <h1 class='center'>{{ site.text.index.coming_soon }}</h1>
  {% endif %}
</div>
