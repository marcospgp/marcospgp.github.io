---
layout: page
title: Notes
---

This is where I keep notes for things I keep revisiting throughout my work. Entries are sorted alphabetically.

---

# General development

## Email

When setting up email make sure to [enable SPF, DKIM, and DMARC](https://support.google.com/a/answer/10583557?sjid=7080635252494889890-EU) to properly authenticate messages. Use <https://www.dmarctester.com> to test this.

If unable to send email through a third party client for a Google Workspace account, try enabling "Allow per-user outbound gateways" in the admin panel.

## Git

### Commit without a message

`git add -A && git commit --allow-empty-message -m '' && git push`

### Submodules

Git submodules are a nice way of setting up project dependencies.

#### Adding

You can add a dependency into a repo by running:

`git submodule add --name steamworksnt https://github.com/marcospgp/steamworksnt.git <target-folder>`

Including the `--name` prevents the destination path from being used as the name by default, which can be confusing if the module is moved with `git mv` later.

If submodules will be used in-editor as part of a Unity project, they should be placed in the `Assets` folder.

#### Updating

To update dependencies or download them after a fresh `git clone`, use:

`git submodule update --init --recursive --merge --remote`

#### Removing

To remove a submodule, use `git rm <submodule path>` (and not `git submodule deinit`) in accordance with [the docs](https://git-scm.com/docs/gitsubmodules#_forms).

However, also note that:

> the Git directory is kept around as it to make it possible to checkout past commits without requiring fetching from another repository.
> To completely remove a submodule, manually delete `$GIT_DIR/modules/<name>/`.

`$GIT_DIR` will usually be the `.git` folder.

# Unity game dev

## Analyzers

As of 2023-10-06, and since a new Unity extension for VSCode has been released, there is no official way to support adding Roslyn analyzers for C# code (perhaps other than reverting to using Omnisharp).

There should be an [official way](https://docs.unity3d.com/2023.3/Documentation/Manual/roslyn-analyzers.html) of adding these directly in the Unity editor, but I was [unsuccessful](https://forum.unity.com/threads/support-roslyn-analyzers-in-unity-projects.927437/page-2#post-9386087) in doing so.

I may revisit this later, but at this point it might be wiser to wait for the VSCode extension to become more mature.

## Animations

### Importing

- "bake into pose" root transform changes that shouldn't be applied to the gameobject on each animation.

### Mixamo

Downloading animations "without skin" prevents wasting memory with unnecessary models.
However, the avatar generated by Unity for these won't work properly.
That can be fixed by downloading the default Mixamo character (Y Bot) in T-pose and generating an avatar from it, which can then be used with "without skin" Mixamo animations.

### Movement without foot sliding

See {% post_link 2023-12-02-unity-foot-sliding %}.

## Blender

### Settings

- Disable saving `.blend1` files

### Unity interop

- Store `.blend` files directly inside the Unity project's "Assets" folder
- There doesn't seem to be a way to store textures in `.blend` file, so keep them in "Assets" folder and use them in both Blender and Unity

## Color banding

[Fix color banding](https://forum.unity.com/threads/horrible-color-banding-for-lighting-fog.912368/#post-9386285) by checking "enable dithering" in the camera inspector.

## LODs

- Only the last LOD matters
- Impostors > LOD meshes
- Advancements like Nanite can change 3D lore fast

Based on <https://medium.com/@jasonbooth_86226/when-to-make-lods-c3109c35b802>

## Math

### Frame rate independent lerp

Use a [frame rate independent](https://marcospereira.me/2022/08/24/lerp-how-to-frame-rate-independent/) form of linear interpolation instead of the default `Mathf.Lerp()`.

Ready to use code should be available in the [Unity utilities repo](https://github.com/marcospgp/unity-utilities).

## Multithreading

Use the `SafeTask` wrapper:

- <https://github.com/marcospgp/unity-utilities/blob/main/Async/SafeTask.cs>
- <https://marcospereira.me/2022/05/06/safe-async-tasks-in-unity/>

## Procedural generation

Call [MarkDynamic](https://docs.unity3d.com/ScriptReference/Mesh.MarkDynamic.html) on meshes that are updated frequently at runtime.

## Shaders

### Shader Graph

#### Hiding properties from inspector

Before version 2023.3.0a11, Shader Graph properties not marked as "Exposed" simply don't work unless initialized in code. The expected behavior would be to simply hide the property from the material inspector.

There is more info about this issue in [this thread](https://forum.unity.com/threads/non-exposed-parameters-dont-work.912149).

## Utilities repo

<https://github.com/marcospgp/unity-utilities>
